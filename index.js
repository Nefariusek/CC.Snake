!function(t){var e={};function i(s){if(e[s])return e[s].exports;var l=e[s]={i:s,l:!1,exports:{}};return t[s].call(l.exports,l,l.exports,i),l.l=!0,l.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var l in t)i.d(s,l,function(e){return t[e]}.bind(null,l));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=10)}([function(t,e,i){t.exports=i.p+"f81c04b5873247fa51ee4de659e2232d.jpg"},function(t,e,i){t.exports=i.p+"20ca9d6524ae759dcbfd35826620e77f.png"},function(t,e,i){t.exports=i.p+"4fd0c7125e392afe9c92f3e9a7655427.png"},function(t,e,i){t.exports=i.p+"d59d46e55e357d5a53910e989a4854b0.png"},function(t,e,i){t.exports=i.p+"677bf360cf075a5e86ac77ae0e534065.png"},function(t,e,i){t.exports=i.p+"3e88e5115e3382f4cc4966fc9a786b56.png"},function(t,e,i){t.exports=i.p+"20bdf927181eaf1577a3914bf7ec1890.png"},function(t,e,i){t.exports=i.p+"ef06920803f7356ef5268e6fdb9962da.png"},function(t,e,i){t.exports=i.p+"d8566b749d972583b7bfb49df549e449.mp3"},function(t,e,i){t.exports=i.p+"1d775356ea7009b5b76e1f28d31540b0.mp3"},function(t,e,i){"use strict";i.r(e);const s=new Image;s.src="/src/snake-img/head-left.png";const l=new Image;l.src="/src/snake-img/head-right.png";const h=new Image;h.src="/src/snake-img/head-up.png";const r=new Image;r.src="/src/snake-img/head-down.png";const a=new Image;a.src="/src/snake-img/tail.png";const n=1.2;var o=class{constructor(t,e){this.x=t,this.y=e,this.speed=3,this.cell=20,this.direction=null,this.prevDirection=null,this.tailLength=0,this.tail=[]}draw(){for(let t=0;t<this.tail.length-1;t++)vt.drawImage(a,this.tail[t].x,this.tail[t].y,this.cell*n,this.cell*n);"LEFT"===this.direction?vt.drawImage(s,this.tail[this.tail.length-1].x,this.tail[this.tail.length-1].y,this.cell*n,this.cell*n):"RIGHT"===this.direction?vt.drawImage(l,this.tail[this.tail.length-1].x,this.tail[this.tail.length-1].y,this.cell*n,this.cell*n):"UP"===this.direction?vt.drawImage(h,this.tail[this.tail.length-1].x,this.tail[this.tail.length-1].y,this.cell*n,this.cell*n):"DOWN"===this.direction?vt.drawImage(r,this.tail[this.tail.length-1].x,this.tail[this.tail.length-1].y,this.cell*n,this.cell*n):vt.drawImage(l,this.tail[this.tail.length-1].x,this.tail[this.tail.length-1].y,this.cell*n,this.cell*n)}setDirection(t){this.direction=t}setprevDirection(t){this.prevDirection=t}expandSnake(){this.tailLength++}move(){this.direction&&("LEFT"===this.direction?this.x-=this.speed:"RIGHT"===this.direction?this.x+=this.speed:"UP"===this.direction?this.y-=this.speed:"DOWN"===this.direction&&(this.y+=this.speed))}onHit(t,e){let i=e.wallsCircle.concat(t.wallsRect);if(this.x<0||this.y<0||this.x+this.cell>bt||this.y+this.cell>It)return!0;let s=Math.ceil(3*this.cell/this.speed);for(let t=0;t<this.tailLength-s;t++){if("UP"===this.prevDirection&&("LEFT"===this.direction||"RIGHT"===this.direction)){if(this.x>this.tail[t].x&&this.x<this.tail[t].x+this.cell&&this.y>this.tail[t].y&&this.y<this.tail[t].y+this.cell)return!0;if(this.x+this.cell>this.tail[t].x&&this.x+this.cell<this.tail[t].x+this.cell&&this.y>this.tail[t].y&&this.y<this.tail[t].y+this.cell)return!0}if("DOWN"===this.prevDirection&&("LEFT"===this.direction||"RIGHT"===this.direction)){if(this.x>this.tail[t].x&&this.x<this.tail[t].x+this.cell&&this.y+this.cell>this.tail[t].y&&this.y+this.cell<this.tail[t].y+this.cell)return!0;if(this.x+this.cell>this.tail[t].x&&this.x+this.cell<this.tail[t].x+this.cell&&this.y+this.cell>this.tail[t].y&&this.y+this.cell<this.tail[t].y+this.cell)return!0}if("RIGHT"===this.prevDirection&&("UP"===this.direction||"DOWN"===this.direction)){if(this.x+this.cell>this.tail[t].x&&this.x+this.cell<this.tail[t].x+this.cell&&this.y>this.tail[t].y&&this.y<this.tail[t].y+this.cell)return!0;if(this.x+this.cell>this.tail[t].x&&this.x+this.cell<this.tail[t].x+this.cell&&this.y+this.cell>this.tail[t].y&&this.y+this.cell<this.tail[t].y+this.cell)return!0}if("LEFT"===this.prevDirection&&("UP"===this.direction||"DOWN"===this.direction)){if(this.x>this.tail[t].x&&this.x<this.tail[t].x+this.cell&&this.y>this.tail[t].y&&this.y<this.tail[t].y+this.cell)return!0;if(this.x>this.tail[t].x&&this.x<this.tail[t].x+this.cell&&this.y+this.cell>this.tail[t].y&&this.y+this.cell<this.tail[t].y+this.cell)return!0}}for(let t=0;t<i.length;t++)if("rect"===i[t].type){if(this.x>i[t].x&&this.x<i[t].x+i[t].length&&this.y>i[t].y&&this.y<i[t].y+i[t].height)return!0;if(this.x+this.cell>i[t].x&&this.x+this.cell<i[t].x+i[t].length&&this.y>i[t].y&&this.y<i[t].y+i[t].height)return!0;if(this.x>i[t].x&&this.x<i[t].x+i[t].length&&this.y+this.cell>i[t].y&&this.y+this.cell<i[t].y+i[t].height)return!0;if(this.x+this.cell>i[t].x&&this.x+this.cell<i[t].x+i[t].length&&this.y+this.cell>i[t].y&&this.y+this.cell<i[t].y+i[t].height)return!0}else{let e;if((e=(this.x-i[t].x)**2+(this.y-i[t].y)**2)<=i[t].radius**2)return!0;if((e=(this.x+this.cell-i[t].x)**2+(this.y-i[t].y)**2)<=i[t].radius**2)return!0;if((e=(this.x-i[t].x)**2+(this.y+this.cell-i[t].y)**2)<=i[t].radius**2)return!0;if((e=(this.x+this.cell-i[t].x)**2+(this.y+this.cell-i[t].y)**2)<=i[t].radius**2)return!0;if((e=(this.x+this.cell/2-i[t].x)**2+(this.y-i[t].y)**2)<=i[t].radius**2)return!0;if((e=(this.x+this.cell/2-i[t].x)**2+(this.y+this.cell-i[t].y)**2)<=i[t].radius**2)return!0;if((e=(this.x+this.cell-i[t].x)**2+(this.y+this.cell/2-i[t].y)**2)<=i[t].radius**2)return!0;if((e=(this.x-i[t].x)**2+(this.y+this.cell/2-i[t].y)**2)<=i[t].radius**2)return!0}return!1}tailMove(){for(let t=0;t<this.tail.length-1;t++)this.tail[t]=this.tail[t+1];this.tail[this.tailLength]={x:this.x,y:this.y}}};class c{constructor(t,e){this.x=t,this.y=e,this.length=100,this.height=40,this.radius=this.height/2,this.time=null,this.upperRow=It/3,this.bottomRow=2*It/3,this.wallsRect=[],this.type="rect"}drawRect(){vt.fillStyle="black",vt.fillRect(this.x,this.y,this.length,this.height)}addWallsRect(){return this.wallsRect.push(new c(5*bt/12,this.upperRow)),this.wallsRect.push(new c(9.5*bt/12+3*this.radius,this.upperRow)),this.wallsRect.push(new c(2.5*bt/12,this.bottomRow)),this.wallsRect.push(new c(2.5*bt/12+this.length+6*this.radius,this.bottomRow)),this.wallsRect}addWallsRect_level2(){return this.upperRow=It/5,this.wallsRect.push(new c(1.5*bt/12+3*this.radius,this.upperRow)),this.wallsRect.push(new c(7*bt/12,this.upperRow)),this.wallsRect.push(new c(7*bt/12+this.length+6*this.radius,this.upperRow)),this.wallsRect.push(new c(1.5*bt/12,this.upperRow+It/5)),this.wallsRect.push(new c(1.5*bt/12+this.length+3*this.radius,this.upperRow+It/5)),this.wallsRect.push(new c(7*bt/12+7*this.radius,this.upperRow+It/5)),this.wallsRect.push(new c(bt/12-this.radius,this.upperRow+2*It/5)),this.wallsRect.push(new c(bt/12+this.length+2*this.radius,this.upperRow+2*It/5)),this.wallsRect.push(new c(5.5*bt/12,this.upperRow+2*It/5)),this.wallsRect.push(new c(5.5*bt/12+this.length+2*this.radius,this.upperRow+2*It/5)),this.wallsRect.push(new c(5.5*bt/12+2*this.length+8*this.radius,this.upperRow+2*It/5)),this.wallsRect.push(new c(6*bt/12+3*this.radius,this.upperRow+3*It/5)),this.wallsRect.push(new c(6*bt/12+11*this.radius,this.upperRow+3*It/5)),this.wallsRect}addWallsRect_level3(){return this.upperRow=It/5,this.wallsRect.push(new c(bt/12,this.upperRow)),this.wallsRect.push(new c(bt/12+11*this.radius,this.upperRow)),this.wallsRect.push(new c(7.5*bt/12,this.upperRow)),this.wallsRect.push(new c(1.5*bt/12+3*this.radius,this.upperRow+It/5)),this.wallsRect.push(new c(.5*bt/12,this.upperRow+2*It/5)),this.wallsRect.push(new c(.5*bt/12+11*this.radius,this.upperRow+2*It/5)),this.wallsRect.push(new c(8*bt/12,this.upperRow+2*It/5)),this.wallsRect.push(new c(8*bt/12+this.length+3*this.radius,this.upperRow+2*It/5)),this.wallsRect.push(new c(3.5*bt/12+3*this.radius,this.upperRow+3*It/5)),this.wallsRect.push(new c(3.5*bt/12+11*this.radius,this.upperRow+3*It/5)),this.wallsRect}drawWalls(){let t=0;for(;t<this.wallsRect.length;t++)"rect"===this.wallsRect[t].type&&(vt.beginPath(),this.wallsRect[t].drawRect(),vt.closePath());t=0}drawText(){vt.font="300px bold serif",vt.fillText("S",bt/12,It/2.5),vt.fillText("N",5*bt/12,It/2.5),vt.fillText("A",9*bt/12,It/2.5),vt.fillText("K",3*bt/12,2.2*It/2.5),vt.fillText("E",7*bt/12,2.2*It/2.5)}async wallsChange(){var t;console.log("dziala"),await(t=1e4,new Promise(e=>setTimeout(e,t))),console.log("po 10s")}}var p=c;class u extends p{constructor(t,e){super(t,e),this.length=length,this.radius=this.height/2,this.upperRowCircle=this.upperRow+this.radius,this.bottomRowCircle=this.bottomRow+this.radius,this.wallsCircle=[],this.type="circl"}drawCirc(){vt.fillStyle="black",vt.arc(this.x,this.y,this.radius,0,2*Math.PI),vt.fill()}addWallsCircle(){return this.wallsCircle.push(new u(bt/12,this.upperRowCircle)),this.wallsCircle.push(new u(bt/12+4*this.radius,this.upperRowCircle)),this.wallsCircle.push(new u(bt/12+8*this.radius,this.upperRowCircle)),this.wallsCircle.push(new u(bt/12+8*this.radius,this.upperRowCircle)),this.wallsCircle.push(new u(5*bt/12+this.length+3*this.radius,this.upperRowCircle)),this.wallsCircle.push(new u(9.5*bt/12,this.upperRowCircle)),this.wallsCircle.push(new u(2.5*bt/12+this.length+3*this.radius,this.bottomRowCircle)),this.wallsCircle.push(new u(8.5*bt/12,this.bottomRowCircle)),this.wallsCircle}addWallsCircle_level2(){return this.upperRow=It/5,this.upperRowCircle=this.upperRow+this.radius,this.wallsCircle.push(new u(1.5*bt/12,this.upperRowCircle)),this.wallsCircle.push(new u(1.5*bt/12+11*this.radius,this.upperRowCircle)),this.wallsCircle.push(new u(1.5*bt/12+15*this.radius,this.upperRowCircle)),this.wallsCircle.push(new u(7*bt/12+8*this.radius,this.upperRowCircle)),this.wallsCircle.push(new u(7*bt/12,this.upperRowCircle+It/5)),this.wallsCircle.push(new u(7*bt/12+4*this.radius,this.upperRowCircle+It/5)),this.wallsCircle.push(new u(7*bt/12+15*this.radius,this.upperRowCircle+It/5)),this.wallsCircle.push(new u(5.5*bt/12+15*this.radius,this.upperRowCircle+2*It/5)),this.wallsCircle.push(new u(1.5*bt/12,this.upperRowCircle+3*It/5)),this.wallsCircle.push(new u(1.5*bt/12+4*this.radius,this.upperRowCircle+3*It/5)),this.wallsCircle.push(new u(1.5*bt/12+8*this.radius,this.upperRowCircle+3*It/5)),this.wallsCircle.push(new u(6*bt/12,this.upperRowCircle+3*It/5)),this.wallsCircle.push(new u(6*bt/12+2*this.length+19*this.radius,this.upperRowCircle+3*It/5)),this.wallsCircle}addWallsCircle_level3(){return this.upperRow=It/5,this.upperRowCircle=this.upperRow+this.radius,this.wallsCircle.push(new u(bt/12+8*this.radius,this.upperRowCircle)),this.wallsCircle.push(new u(bt/12+19*this.radius,this.upperRowCircle)),this.wallsCircle.push(new u(7.5*bt/12+8*this.radius,this.upperRowCircle)),this.wallsCircle.push(new u(7.5*bt/12+12*this.radius,this.upperRowCircle)),this.wallsCircle.push(new u(1.5*bt/12,this.upperRowCircle+It/5)),this.wallsCircle.push(new u(1.5*bt/12+this.length+11*this.radius,this.upperRowCircle+It/5)),this.wallsCircle.push(new u(8*bt/12,this.upperRowCircle+It/5)),this.wallsCircle.push(new u(8*bt/12+4*this.radius,this.upperRowCircle+It/5)),this.wallsCircle.push(new u(8*bt/12+8*this.radius,this.upperRowCircle+It/5)),this.wallsCircle.push(new u(.5*bt/12+8*this.radius,this.upperRowCircle+2*It/5)),this.wallsCircle.push(new u(.5*bt/12+19*this.radius,this.upperRowCircle+2*It/5)),this.wallsCircle.push(new u(3.5*bt/12,this.upperRowCircle+3*It/5)),this.wallsCircle.push(new u(3.5*bt/12+2*this.length+19*this.radius,this.upperRowCircle+3*It/5)),this.wallsCircle}drawWalls(){let t=0;for(;t<this.wallsCircle.length;t++)"circl"===this.wallsCircle[t].type&&(vt.beginPath(),this.wallsCircle[t].drawCirc(),vt.closePath());t=0}}var d=u;function w(t){return new Promise(e=>setTimeout(e,t))}var g=class{constructor(t,e,i,s,l){this.x=t,this.y=e,this.size=i,this.snake=s,this.foodManager=l,this.toRemove=0}draw(){vt.drawImage(this.img,this.x,this.y,this.size,this.size)}async eat(t){console.log("".concat(this.name," eaten")),this.eatFood();for(var e=0;e<t;e++)this.snake.expandSnake(),await w(150)}async doubleMultiplier(){this.foodManager.multiplier*=2,console.log(this.foodManager.multiplier),await w(1e4),this.foodManager.multiplier/=2}async irregularMove(){for(var t=0;t<20;t++)this.snake.speed*=2,await w(250),this.snake.speed/=2,await w(250)}splitSnake(){let t;t=1===this.snake.tailLength?0:this.snake.tailLength/2;for(var e=0;e<t;e++)this.snake.tail.shift(),this.snake.tailLength--}};const f=new Image;f.src="/src/foods/img/redApple.png";var m=class extends g{constructor(t,e,i,s,l){super(t,e,i,s,l),this.img=f,this.name="Normal Food"}eatFood(){}};const x=new Image;x.src="/src/foods/img/greenApple.png";var y=class extends g{constructor(t,e,i,s,l){super(t,e,i,s,l),this.img=x,this.name="Combo Food"}async eatFood(){this.foodManager.recentlyEaten.every(t=>"Combo Food"===t.name)&&this.doubleMultiplier()}};const R=new Image;R.src="/src/foods/img/goldenApple.png";var C=class extends g{constructor(t,e,i,s,l){super(t,e,i,s,l),this.img=R,this.name="Super Food"}eatFood(){this.foodManager.maxFoodCount++}};const v=new Image;v.src="/src/foods/img/rottenApple.png";var b=class extends g{constructor(t,e,i,s,l){super(t,e,i,s,l),this.img=v,this.name="Weakening Food"}async eatFood(){this.irregularMove()}};const I=new Image;I.src="/src/foods/img/pinkApple.png";var T=class extends g{constructor(t,e,i,s,l){super(t,e,i,s,l),this.img=I,this.name="Split Food"}async eatFood(){this.splitSnake()}};var k=class{constructor(t,e,i,s){this.foodOnMap=[],this.recentlyEaten=[new m(0,0,0),new m(0,0,0),new m(0,0,0)],this.maxFoodCount=3,this.foodSize=t,this.multiplier=1,this.snake=e,this.wallsRect=i,this.wallsCircle=s,this.refreshFood()}headEat(){this.foodOnMap=this.foodOnMap.filter(t=>!(t.x+6<=this.snake.x+this.snake.cell&&t.x+t.size-6>=this.snake.x&&t.y+6<=this.snake.y+this.snake.cell&&t.y+t.size-6>=this.snake.y)||(this.recentlyEaten.shift(),this.recentlyEaten.push(t),t.eat(this.multiplier),!1))}placeApple(){let t,e;do{t=Math.floor(Math.random()*(bt-this.foodSize)),e=Math.floor(Math.random()*(It-this.foodSize))}while(this.wallsRect.some(i=>t+this.foodSize+5>i.x&&t<i.x+i.length+5&&e+this.foodSize+5>i.y&&e<i.y+i.height+5)||this.wallsCircle.some(i=>t+this.foodSize+5>i.x-i.radius&&t<i.x+i.radius+5&&e+this.foodSize+5>i.y-i.radius&&e<i.y+i.radius+5));let i=Math.floor(100*Math.random());i<42?this.foodOnMap.push(new m(t,e,this.foodSize,this.snake,this)):i<84?this.foodOnMap.push(new y(t,e,this.foodSize,this.snake,this)):i<94?this.foodOnMap.push(new b(t,e,this.foodSize,this.snake,this)):i<97?this.foodOnMap.push(new C(t,e,this.foodSize,this.snake,this)):this.foodOnMap.push(new T(t,e,this.foodSize,this.snake,this))}foodGenerator(){this.foodOnMap.length<this.maxFoodCount&&this.placeApple()}drawFood(){this.foodOnMap.forEach(t=>{t.draw()})}async refreshFood(){this.foodOnMap.splice(0,1);let t=Math.floor(1e4*Math.random());var e;await(e=7500+t,new Promise(t=>setTimeout(t,e))),this.refreshFood()}manageFood(){this.headEat(),this.foodGenerator(),this.drawFood()}},S=i(0),M=i.n(S),L=i(1),F=i.n(L),E=i(2),D=i.n(E),P=i(3),O=i.n(P),W=i(4),z=i.n(W),A=i(5),_=i.n(A),j=i(6),G=i.n(j),H=i(7),q=i.n(H);let N,V,U=new Audio(i(8)),B=!1,K=new Audio(i(9)),X="Gamer",Y=!0,J=new Image,Q=new Image,Z=new Image,$=new Image,tt=new Image,et=new Image,it=new Image,st=new Image;J.src=M.a,Q.src=F.a,Z.src=D.a,$.src=O.a,tt.src=z.a,et.src=_.a,it.src=G.a,st.src=q.a;let lt=[384,298,320],ht=[300,380,460],rt=[192,364,320],at=[80,80,80],nt=[!1,!1,!1];const ot=t=>{N=t.pageX-Ct.getBoundingClientRect().left,V=t.pageY-Ct.getBoundingClientRect().top;for(let t=0;t<lt.length;t++)nt[t]=N>lt[t]&&N<lt[t]+rt[t]&&(V>ht[t]+20&&V<ht[t]+at[t]-10)},ct=()=>{for(let t=0;t<lt.length;t++)N>lt[t]&&N<lt[t]+rt[t]&&V>ht[t]+20&&V<ht[t]+at[t]-10&&(nt[0]&&(console.log("play"),Y=!1,Ct.removeEventListener("mousemove",ot),Ct.removeEventListener("mouseup",ct)),nt[1]&&(console.log("settings"),gt()),nt[2]&&(console.log("credits"),ft()))};let pt=document.querySelector(".modalSettings"),ut=document.querySelector(".close-button-settings"),dt=document.querySelector(".modalCredits"),wt=document.querySelector(".close-button-credits");const gt=()=>{pt.classList.toggle("show-modal"),X=document.getElementById("playerName").value},ft=()=>{dt.classList.toggle("show-modal")},mt=t=>{Y=t};ut.addEventListener("click",gt),wt.addEventListener("click",ft),window.addEventListener("click",t=>{t.target===pt&&gt(),t.target===dt&&ft()});let xt=!1,yt=!1,Rt=!1;i.d(e,"canvas",(function(){return Ct})),i.d(e,"ctx",(function(){return vt})),i.d(e,"cw",(function(){return bt})),i.d(e,"ch",(function(){return It})),i.d(e,"gameLoop",(function(){return Wt})),i.d(e,"gameRestart",(function(){return At}));const Ct=document.querySelector("canvas"),vt=Ct.getContext("2d"),bt=Ct.width-239,It=Ct.height;let Tt=!1,kt=!1,St=!1,Mt=new o(50,50),Lt=new Image;Lt.src="../src/walls/background.jpg";let Ft=new p,Et=new d,Dt=Ft.addWallsRect(),Pt=Et.addWallsCircle(),Ot=new k(24,Mt,Ft.wallsRect,Et.wallsCircle);const Wt=()=>{if(!0===Y)return vt.clearRect(0,0,bt,It),vt.drawImage(J,0,0),vt.drawImage(Q,400,50),vt.drawImage(Z,lt[0],ht[0]),vt.drawImage($,lt[1],ht[1]),vt.drawImage(tt,lt[2],ht[2]),nt[0]&&vt.drawImage(et,lt[0],ht[0]),nt[1]&&vt.drawImage(it,lt[1],ht[1]),nt[2]&&vt.drawImage(st,lt[2],ht[2]),void requestAnimationFrame(Wt);vt.drawImage(Lt,0,0),Mt.move(),Mt.tailMove(),Et.drawWalls(),Ft.drawWalls(),Ot.manageFood(),document.getElementById("name").innerHTML="".concat(X),document.getElementById("score-span").innerHTML="".concat(Mt.tailLength),document.getElementById("multiplier-span").innerHTML="".concat(Ot.multiplier),Mt.draw(),Mt.onHit(Ft,Et)?zt():Mt.tailLength>=30&&!1===kt&&!1===St?(()=>{vt.font="50px Visitor";let t=vt.measureText("Level 2!");vt.fillText("Level 2!",bt/2-t.width/2,It/2),vt.font="20px Visitor";let e=vt.measureText("Press Space to start");vt.fillText("Press Space to start",bt/2-e.width/2,It/2+50/1.5),yt=!0})():Mt.tailLength>=40&&!0===kt&&!1===St?(()=>{yt=!1;vt.font="50px Visitor";let t=vt.measureText("Level 3!");vt.fillText("Level 3!",bt/2-t.width/2,It/2),vt.font="20px Visitor";let e=vt.measureText("Press Space to start");vt.fillText("Press Space to start",bt/2-e.width/2,It/2+50/1.5),Rt=!0})():Mt.tailLength>=50&&!0===St?(()=>{Rt=!1;vt.font="45px Visitor";let t=vt.measureText("End of the game! Thanks for playing!");vt.fillText("End of the game! Thanks for playing!",bt/2-t.width/2,It/2),vt.font="20px Visitor";let e=vt.measureText("Press Space to play again");vt.fillText("Press Space to play again",bt/2-e.width/2,It/2+50/1.5),xt=!0,Ct.addEventListener("mousemove",ot),Ct.addEventListener("mouseup",ct),mt(!0)})():requestAnimationFrame(Wt)},zt=()=>{vt.font="50px Visitor";let t=vt.measureText("Game Over");vt.fillText("Game Over",bt/2-t.width/2,It/2),vt.font="20px Visitor";let e=vt.measureText("Press Space to restart");vt.fillText("Press Space to restart",bt/2-e.width/2,It/2+50/1.5),Tt=!0},At=()=>{Tt=!1,(t=>{yt=t})(!1),(t=>{Rt=t})(!1),(t=>{xt=t})(!1),kt=!1,St=!1,vt.clearRect(0,0,bt,It),Mt=new o(50,50),Et=new d,Ft=new p,Pt=Et.addWallsCircle(),Dt=Ft.addWallsRect(),Ot=new k(24,Mt,Dt,Pt),(Lt=new Image).src="../src/walls/background.jpg",K.play(),requestAnimationFrame(Wt)};Ct.addEventListener("mousemove",ot),Ct.addEventListener("mouseup",ct),document.addEventListener("keypress",t=>{let{keyCode:e}=t;console.log(e),!1===Y&&(65!==e&&97!=e||"RIGHT"==Mt.direction||null===Mt.prevDirection||(Mt.setDirection(Mt.direction),Mt.setDirection("LEFT")),68!==e&&100!=e||"LEFT"==Mt.direction||(Mt.setprevDirection(Mt.direction),null!==Mt.prevDirection||(Mt.prevDirection=""),Mt.setDirection("RIGHT")),87!==e&&119!=e||"DOWN"==Mt.direction||null===Mt.prevDirection||(Mt.setprevDirection(Mt.direction),Mt.setDirection("UP")),83!==e&&115!=e||"UP"==Mt.direction||(Mt.setprevDirection(Mt.direction),null!==Mt.prevDirection||(Mt.prevDirection=""),Mt.setDirection("DOWN")),107!==e&&75!==e||Mt.expandSnake(),109!==e&&77!==e||((B=!B)||U.pause(),B&&U.play())),82!==e&&114!==e||(mt(!1),At()),32===e&&(Tt&&At(),yt&&(Mt=new o(50,50),vt.clearRect(0,0,bt,It),Et=new d,Ft=new p,Pt=Et.addWallsCircle_level2(),Dt=Ft.addWallsRect_level2(),Ot=new k(24,Mt,Dt,Pt),(Lt=new Image).src="../src/walls/background.jpg",kt=!0,K.play(),requestAnimationFrame(Wt)),Rt&&(vt.clearRect(0,0,bt,It),Mt=new o(50,50),Et=new d,Ft=new p,Pt=Et.addWallsCircle_level3(),Dt=Ft.addWallsRect_level3(),Ot=new k(24,Mt,Dt,Pt),(Lt=new Image).src="../src/walls/background.jpg",St=!0,K.play(),requestAnimationFrame(Wt)),xt&&At())}),requestAnimationFrame(Wt)}]);